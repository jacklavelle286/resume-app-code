{
 "variables": {
   "source_ami": ""
 },
 "builders": [
   {
     "type": "amazon-ebs",
     "region": "us-east-1",
     "source_ami": "{{user `source_ami`}}",  
     "instance_type": "t2.micro",
     "ssh_username": "ec2-user",
     "ami_name": "my-portfolio-ami-pipeline-image-{{timestamp}}"
   }
 ],
 "provisioners": [
   {
     "type": "shell",
     "inline": [
       "sudo yum update -y",
       "sudo yum install -y httpd",
       "sudo systemctl start httpd",
       "sudo systemctl enable httpd"
     ]
   },
   {
     "type": "file",
     "source": "{{template_dir}}/website-files/",
     "destination": "/var/www/html/"
   },
   {
     "type": "shell",
     "inline": [
       "sudo chown -R ec2-user:ec2-user /var/www/html",
       "sudo systemctl restart httpd"
     ]
   }
 ]
}
